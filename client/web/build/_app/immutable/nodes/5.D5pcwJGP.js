import{s as Ks,r as bt,o as Ws,f as Qs,d as vt,h as Ys,n as Ct,e as Gt}from"../chunks/UNimWYyO.js";import{S as Zs,i as Js,d as o,k as ht,l as Ze,v as xt,s as ke,m as r,w as zt,D as xs,a as ie,b as s,r as me,c as i,e as c,o as F,g as k,f as Y,x as Kt,h as d,p as U,j as w,t as Z,z as Ge,q as Yt,n as pe,y as Xs,E as ys,B as qt,C as Rt}from"../chunks/rPDuuC_j.js";import{l as tt,k as $s,e as pt,s as er,r as _t,d as Cs,m as ns,i as tr}from"../chunks/p95UxV7J.js";import{q as mt,a as Wt,f as yt,s as Qt}from"../chunks/Crnc-Z4a.js";function Bs(a,e,t){const l=a.slice();return l[73]=e[t],l}function Ts(a,e,t){const l=a.slice();return l[76]=e[t],l}function Ds(a,e,t){const l=a.slice();return l[79]=e[t],l}function Is(a,e,t){const l=a.slice();l[82]=e[t];const n=os(l[82].groupStatus);return l[83]=n,l}function Ss(a){let e,t;return{c(){e=d("span"),t=Z(a[15]),this.h()},l(l){e=i(l,"SPAN",{class:!0});var n=c(e);t=Y(n,a[15]),n.forEach(o),this.h()},h(){r(e,"class","text-sm text-muted-foreground")},m(l,n){ie(l,e,n),s(e,t)},p(l,n){n[0]&32768&&ke(t,l[15])},d(l){l&&o(e)}}}function sr(a){let e,t,l,n,u,f,v,z,B="海报",T,K,ee="剧集名称",p,E,j="季数",O,D,re="集数",A,g,I="状态",x,m,_="完整性",M,P,b="操作",L,le,Q,se,W=pt(a[20]),C=[];for(let S=0;S<W.length;S+=1)C[S]=Ms(Is(a,W,S));return{c(){e=d("table"),t=d("thead"),l=d("tr"),n=d("th"),u=d("input"),v=w(),z=d("th"),z.textContent=B,T=w(),K=d("th"),K.textContent=ee,p=w(),E=d("th"),E.textContent=j,O=w(),D=d("th"),D.textContent=re,A=w(),g=d("th"),g.textContent=I,x=w(),m=d("th"),m.textContent=_,M=w(),P=d("th"),P.textContent=b,L=w(),le=d("tbody");for(let S=0;S<C.length;S+=1)C[S].c();this.h()},l(S){e=i(S,"TABLE",{class:!0});var J=c(e);t=i(J,"THEAD",{class:!0});var R=c(t);l=i(R,"TR",{class:!0});var N=c(l);n=i(N,"TH",{class:!0});var $=c(n);u=i($,"INPUT",{type:!0,class:!0}),$.forEach(o),v=k(N),z=i(N,"TH",{class:!0,"data-svelte-h":!0}),pe(z)!=="svelte-4t8ua8"&&(z.textContent=B),T=k(N),K=i(N,"TH",{class:!0,"data-svelte-h":!0}),pe(K)!=="svelte-1nj33mt"&&(K.textContent=ee),p=k(N),E=i(N,"TH",{class:!0,"data-svelte-h":!0}),pe(E)!=="svelte-1yo82se"&&(E.textContent=j),O=k(N),D=i(N,"TH",{class:!0,"data-svelte-h":!0}),pe(D)!=="svelte-t24hup"&&(D.textContent=re),A=k(N),g=i(N,"TH",{class:!0,"data-svelte-h":!0}),pe(g)!=="svelte-sg6ah"&&(g.textContent=I),x=k(N),m=i(N,"TH",{class:!0,"data-svelte-h":!0}),pe(m)!=="svelte-fjgdw4"&&(m.textContent=_),M=k(N),P=i(N,"TH",{class:!0,"data-svelte-h":!0}),pe(P)!=="svelte-1i6w87u"&&(P.textContent=b),N.forEach(o),R.forEach(o),L=k(J),le=i(J,"TBODY",{});var te=c(le);for(let oe=0;oe<C.length;oe+=1)C[oe].l(te);te.forEach(o),J.forEach(o),this.h()},h(){r(u,"type","checkbox"),r(u,"class","h-4 w-4 rounded border-input accent-primary"),u.checked=f=a[4].size===a[20].length&&a[20].length>0,r(n,"class","w-12 p-3 text-left"),r(z,"class","w-16 p-3 text-left font-medium"),r(K,"class","p-3 text-left font-medium"),r(E,"class","w-24 p-3 text-left font-medium"),r(D,"class","w-24 p-3 text-left font-medium"),r(g,"class","w-32 p-3 text-left font-medium"),r(m,"class","w-40 p-3 text-left font-medium"),r(P,"class","w-40 p-3 text-left font-medium"),r(l,"class","border-b border-border text-xs text-muted-foreground"),r(t,"class","bg-card"),r(e,"class","w-full")},m(S,J){ie(S,e,J),s(e,t),s(t,l),s(l,n),s(n,u),s(l,v),s(l,z),s(l,T),s(l,K),s(l,p),s(l,E),s(l,O),s(l,D),s(l,A),s(l,g),s(l,x),s(l,m),s(l,M),s(l,P),s(e,L),s(e,le);for(let R=0;R<C.length;R+=1)C[R]&&C[R].m(le,null);Q||(se=me(u,"change",a[22]),Q=!0)},p(S,J){if(J[0]&1048592&&f!==(f=S[4].size===S[20].length&&S[20].length>0)&&(u.checked=f),J[0]&78643216){W=pt(S[20]);let R;for(R=0;R<W.length;R+=1){const N=Is(S,W,R);C[R]?C[R].p(N,J):(C[R]=Ms(N),C[R].c(),C[R].m(le,null))}for(;R<C.length;R+=1)C[R].d(1);C.length=W.length}},d(S){S&&o(e),Yt(C,S),Q=!1,se()}}}function rr(a){let e,t="没有找到符合条件的剧集";return{c(){e=d("div"),e.textContent=t,this.h()},l(l){e=i(l,"DIV",{class:!0,"data-svelte-h":!0}),pe(e)!=="svelte-1rx92io"&&(e.textContent=t),this.h()},h(){r(e,"class","p-8 text-center text-muted-foreground")},m(l,n){ie(l,e,n)},p:Ct,d(l){l&&o(e)}}}function lr(a){let e,t="加载中...";return{c(){e=d("div"),e.textContent=t,this.h()},l(l){e=i(l,"DIV",{class:!0,"data-svelte-h":!0}),pe(e)!=="svelte-1x1v86g"&&(e.textContent=t),this.h()},h(){r(e,"class","p-8 text-center text-muted-foreground")},m(l,n){ie(l,e,n)},p:Ct,d(l){l&&o(e)}}}function ar(a){let e,t='<svg class="h-4 w-4 text-muted-foreground" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><path d="m15 9-6 6"></path><path d="m9 9 6 6"></path></svg>';return{c(){e=d("div"),e.innerHTML=t,this.h()},l(l){e=i(l,"DIV",{class:!0,"data-svelte-h":!0}),pe(e)!=="svelte-s2gtmp"&&(e.innerHTML=t),this.h()},h(){r(e,"class","flex h-12 w-9 items-center justify-center rounded bg-muted")},m(l,n){ie(l,e,n)},p:Ct,d(l){l&&o(e)}}}function nr(a){let e,t='<svg class="h-5 w-5 text-primary" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect width="18" height="18" x="3" y="3" rx="2" ry="2"></rect><circle cx="9" cy="9" r="2"></circle><path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"></path></svg>';return{c(){e=d("div"),e.innerHTML=t,this.h()},l(l){e=i(l,"DIV",{class:!0,"data-svelte-h":!0}),pe(e)!=="svelte-1xxpjcy"&&(e.innerHTML=t),this.h()},h(){r(e,"class","flex h-12 w-9 items-center justify-center rounded bg-primary/10")},m(l,n){ie(l,e,n)},p:Ct,d(l){l&&o(e)}}}function or(a){let e,t,l;return{c(){e=d("img"),this.h()},l(n){e=i(n,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Gt(e.src,t=a[82].posterPath)||r(e,"src",t),r(e,"alt",l=a[82].name),r(e,"class","h-12 w-9 object-cover rounded")},m(n,u){ie(n,e,u)},p(n,u){u[0]&1048576&&!Gt(e.src,t=n[82].posterPath)&&r(e,"src",t),u[0]&1048576&&l!==(l=n[82].name)&&r(e,"alt",l)},d(n){n&&o(e)}}}function ur(a){let e,t,l,n;return{c(){e=U("svg"),t=U("path"),l=U("path"),n=U("path"),this.h()},l(u){e=F(u,"svg",{class:!0,viewBox:!0,fill:!0,stroke:!0,"stroke-width":!0});var f=c(e);t=F(f,"path",{d:!0}),c(t).forEach(o),l=F(f,"path",{d:!0}),c(l).forEach(o),n=F(f,"path",{d:!0}),c(n).forEach(o),f.forEach(o),this.h()},h(){r(t,"d","m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"),r(l,"d","M12 9v4"),r(n,"d","M12 17h.01"),r(e,"class","h-3 w-3"),r(e,"viewBox","0 0 24 24"),r(e,"fill","none"),r(e,"stroke","currentColor"),r(e,"stroke-width","2")},m(u,f){ie(u,e,f),s(e,t),s(e,l),s(e,n)},d(u){u&&o(e)}}}function cr(a){let e,t,l,n;return{c(){e=U("svg"),t=U("circle"),l=U("path"),n=U("path"),this.h()},l(u){e=F(u,"svg",{class:!0,viewBox:!0,fill:!0,stroke:!0,"stroke-width":!0});var f=c(e);t=F(f,"circle",{cx:!0,cy:!0,r:!0}),c(t).forEach(o),l=F(f,"path",{d:!0}),c(l).forEach(o),n=F(f,"path",{d:!0}),c(n).forEach(o),f.forEach(o),this.h()},h(){r(t,"cx","12"),r(t,"cy","12"),r(t,"r","10"),r(l,"d","m15 9-6 6"),r(n,"d","m9 9 6 6"),r(e,"class","h-3 w-3"),r(e,"viewBox","0 0 24 24"),r(e,"fill","none"),r(e,"stroke","currentColor"),r(e,"stroke-width","2")},m(u,f){ie(u,e,f),s(e,t),s(e,l),s(e,n)},d(u){u&&o(e)}}}function ir(a){let e,t,l;return{c(){e=U("svg"),t=U("path"),l=U("path"),this.h()},l(n){e=F(n,"svg",{class:!0,viewBox:!0,fill:!0,stroke:!0,"stroke-width":!0});var u=c(e);t=F(u,"path",{d:!0}),c(t).forEach(o),l=F(u,"path",{d:!0}),c(l).forEach(o),u.forEach(o),this.h()},h(){r(t,"d","M22 11.08V12a10 10 0 1 1-5.93-9.14"),r(l,"d","m9 11 3 3L22 4"),r(e,"class","h-3 w-3"),r(e,"viewBox","0 0 24 24"),r(e,"fill","none"),r(e,"stroke","currentColor"),r(e,"stroke-width","2")},m(n,u){ie(n,e,u),s(e,t),s(e,l)},d(n){n&&o(e)}}}function dr(a){let e,t,l,n;return{c(){e=U("svg"),t=U("circle"),l=U("path"),n=U("path"),this.h()},l(u){e=F(u,"svg",{class:!0,viewBox:!0,fill:!0,stroke:!0,"stroke-width":!0});var f=c(e);t=F(f,"circle",{cx:!0,cy:!0,r:!0}),c(t).forEach(o),l=F(f,"path",{d:!0}),c(l).forEach(o),n=F(f,"path",{d:!0}),c(n).forEach(o),f.forEach(o),this.h()},h(){r(t,"cx","12"),r(t,"cy","12"),r(t,"r","10"),r(l,"d","m15 9-6 6"),r(n,"d","m9 9 6 6"),r(e,"class","h-3 w-3"),r(e,"viewBox","0 0 24 24"),r(e,"fill","none"),r(e,"stroke","currentColor"),r(e,"stroke-width","2")},m(u,f){ie(u,e,f),s(e,t),s(e,l),s(e,n)},d(u){u&&o(e)}}}function fr(a){let e,t,l;return{c(){e=U("svg"),t=U("path"),l=U("path"),this.h()},l(n){e=F(n,"svg",{class:!0,viewBox:!0,fill:!0,stroke:!0,"stroke-width":!0});var u=c(e);t=F(u,"path",{d:!0}),c(t).forEach(o),l=F(u,"path",{d:!0}),c(l).forEach(o),u.forEach(o),this.h()},h(){r(t,"d","M22 11.08V12a10 10 0 1 1-5.93-9.14"),r(l,"d","m9 11 3 3L22 4"),r(e,"class","h-3 w-3"),r(e,"viewBox","0 0 24 24"),r(e,"fill","none"),r(e,"stroke","currentColor"),r(e,"stroke-width","2")},m(n,u){ie(n,e,u),s(e,t),s(e,l)},d(n){n&&o(e)}}}function hr(a){let e,t,l,n;return{c(){e=U("svg"),t=U("circle"),l=U("path"),n=U("path"),this.h()},l(u){e=F(u,"svg",{class:!0,viewBox:!0,fill:!0,stroke:!0,"stroke-width":!0});var f=c(e);t=F(f,"circle",{cx:!0,cy:!0,r:!0}),c(t).forEach(o),l=F(f,"path",{d:!0}),c(l).forEach(o),n=F(f,"path",{d:!0}),c(n).forEach(o),f.forEach(o),this.h()},h(){r(t,"cx","12"),r(t,"cy","12"),r(t,"r","10"),r(l,"d","m15 9-6 6"),r(n,"d","m9 9 6 6"),r(e,"class","h-3 w-3"),r(e,"viewBox","0 0 24 24"),r(e,"fill","none"),r(e,"stroke","currentColor"),r(e,"stroke-width","2")},m(u,f){ie(u,e,f),s(e,t),s(e,l),s(e,n)},d(u){u&&o(e)}}}function pr(a){let e,t,l;return{c(){e=U("svg"),t=U("path"),l=U("path"),this.h()},l(n){e=F(n,"svg",{class:!0,viewBox:!0,fill:!0,stroke:!0,"stroke-width":!0});var u=c(e);t=F(u,"path",{d:!0}),c(t).forEach(o),l=F(u,"path",{d:!0}),c(l).forEach(o),u.forEach(o),this.h()},h(){r(t,"d","M22 11.08V12a10 10 0 1 1-5.93-9.14"),r(l,"d","m9 11 3 3L22 4"),r(e,"class","h-3 w-3"),r(e,"viewBox","0 0 24 24"),r(e,"fill","none"),r(e,"stroke","currentColor"),r(e,"stroke-width","2")},m(n,u){ie(n,e,u),s(e,t),s(e,l)},d(n){n&&o(e)}}}function Ms(a){let e,t,l,n,u,f,v,z,B,T=a[82].name+"",K,ee,p,E=a[82].seasons.length+"",j,O,D,re=(a[82].seasons.reduce(Hs,0)||"24")+"",A,g,I,x,m,_=a[83].label+"",M,P,b,L,le,Q,se,W,C,S,J,R,N,$,te,oe,de="详情",ue,Ee,ye="匹配",be,Be,Te,we;function _e(){return a[44](a[82])}function Ne(ve,ae){var De;return ve[82].posterPath?or:(De=ve[82].assets)!=null&&De.hasPoster?nr:ar}let Le=Ne(a),X=Le(a);function ne(ve,ae){return ve[82].groupStatus==="scraped"?ir:ve[82].groupStatus==="unscraped"?cr:ur}let fe=ne(a),ce=fe(a);function he(ve,ae){var De;return(De=ve[82].assets)!=null&&De.hasPoster?fr:dr}let y=he(a),H=y(a);function Oe(ve,ae){var De;return(De=ve[82].assets)!=null&&De.hasNfo?pr:hr}let Se=Oe(a),Ce=Se(a);function Je(){return a[45](a[82])}function Xe(){return a[46](a[82])}function je(...ve){return a[47](a[82],...ve)}function Me(){return a[48](a[82])}return{c(){e=d("tr"),t=d("td"),l=d("input"),u=w(),f=d("td"),X.c(),v=w(),z=d("td"),B=d("div"),K=Z(T),ee=w(),p=d("td"),j=Z(E),O=w(),D=d("td"),A=Z(re),g=w(),I=d("td"),x=d("span"),ce.c(),m=w(),M=Z(_),b=w(),L=d("td"),le=d("div"),Q=d("span"),H.c(),se=Z(`
                    海报`),C=w(),S=d("span"),Ce.c(),J=Z(`
                    NFO`),N=w(),$=d("td"),te=d("div"),oe=d("button"),oe.textContent=de,ue=w(),Ee=d("button"),Ee.textContent=ye,be=w(),this.h()},l(ve){e=i(ve,"TR",{class:!0});var ae=c(e);t=i(ae,"TD",{class:!0});var De=c(t);l=i(De,"INPUT",{type:!0,class:!0}),De.forEach(o),u=k(ae),f=i(ae,"TD",{class:!0});var Ve=c(f);X.l(Ve),Ve.forEach(o),v=k(ae),z=i(ae,"TD",{class:!0});var Qe=c(z);B=i(Qe,"DIV",{class:!0});var Ye=c(B);K=Y(Ye,T),Ye.forEach(o),Qe.forEach(o),ee=k(ae),p=i(ae,"TD",{class:!0});var it=c(p);j=Y(it,E),it.forEach(o),O=k(ae),D=i(ae,"TD",{class:!0});var qe=c(D);A=Y(qe,re),qe.forEach(o),g=k(ae),I=i(ae,"TD",{class:!0});var lt=c(I);x=i(lt,"SPAN",{class:!0});var $e=c(x);ce.l($e),m=k($e),M=Y($e,_),$e.forEach(o),lt.forEach(o),b=k(ae),L=i(ae,"TD",{class:!0});var h=c(L);le=i(h,"DIV",{class:!0});var V=c(le);Q=i(V,"SPAN",{class:!0});var q=c(Q);H.l(q),se=Y(q,`
                    海报`),q.forEach(o),C=k(V),S=i(V,"SPAN",{class:!0});var ge=c(S);Ce.l(ge),J=Y(ge,`
                    NFO`),ge.forEach(o),V.forEach(o),h.forEach(o),N=k(ae),$=i(ae,"TD",{class:!0});var Ae=c($);te=i(Ae,"DIV",{class:!0});var Pe=c(te);oe=i(Pe,"BUTTON",{class:!0,"data-svelte-h":!0}),pe(oe)!=="svelte-fskpzj"&&(oe.textContent=de),ue=k(Pe),Ee=i(Pe,"BUTTON",{class:!0,"data-svelte-h":!0}),pe(Ee)!=="svelte-48c8ie"&&(Ee.textContent=ye),Pe.forEach(o),Ae.forEach(o),be=k(ae),ae.forEach(o),this.h()},h(){var ve,ae;r(l,"type","checkbox"),r(l,"class","h-4 w-4 rounded border-input accent-primary"),l.checked=n=a[4].has(a[82].path),r(t,"class","p-3"),r(f,"class","p-3"),r(B,"class","font-medium"),r(z,"class","p-3"),r(p,"class","p-3 text-muted-foreground"),r(D,"class","p-3 text-muted-foreground"),r(x,"class",P="inline-flex items-center gap-1 rounded-full border px-2.5 py-0.5 text-xs font-semibold "+a[83].color+" "+a[83].border),r(I,"class","p-3"),r(Q,"class",W="flex items-center gap-1 text-xs "+((ve=a[82].assets)!=null&&ve.hasPoster?"text-green-500":"text-red-500")),r(S,"class",R="flex items-center gap-1 text-xs "+((ae=a[82].assets)!=null&&ae.hasNfo?"text-green-500":"text-red-500")),r(le,"class","flex items-center gap-2"),r(L,"class","p-3"),r(oe,"class","inline-flex items-center justify-center rounded-md text-xs font-medium h-7 px-2 border border-input bg-background hover:bg-accent"),r(Ee,"class","inline-flex items-center justify-center rounded-md text-xs font-medium h-7 px-2 border border-input bg-background hover:bg-accent"),r(te,"class","flex gap-1"),r($,"class","p-3"),r(e,"class",Be="border-b border-border hover:bg-accent/50 cursor-pointer "+(a[4].has(a[82].path)?"bg-accent/30 border-l-2 border-l-primary":""))},m(ve,ae){ie(ve,e,ae),s(e,t),s(t,l),s(e,u),s(e,f),X.m(f,null),s(e,v),s(e,z),s(z,B),s(B,K),s(e,ee),s(e,p),s(p,j),s(e,O),s(e,D),s(D,A),s(e,g),s(e,I),s(I,x),ce.m(x,null),s(x,m),s(x,M),s(e,b),s(e,L),s(L,le),s(le,Q),H.m(Q,null),s(Q,se),s(le,C),s(le,S),Ce.m(S,null),s(S,J),s(e,N),s(e,$),s($,te),s(te,oe),s(te,ue),s(te,Ee),s(e,be),Te||(we=[me(l,"click",qt(_e)),me(oe,"click",qt(Je)),me(Ee,"click",qt(Xe)),me(e,"click",je),me(e,"dblclick",Me)],Te=!0)},p(ve,ae){var De,Ve;a=ve,ae[0]&1048592&&n!==(n=a[4].has(a[82].path))&&(l.checked=n),Le===(Le=Ne(a))&&X?X.p(a,ae):(X.d(1),X=Le(a),X&&(X.c(),X.m(f,null))),ae[0]&1048576&&T!==(T=a[82].name+"")&&ke(K,T),ae[0]&1048576&&E!==(E=a[82].seasons.length+"")&&ke(j,E),ae[0]&1048576&&re!==(re=(a[82].seasons.reduce(Hs,0)||"24")+"")&&ke(A,re),fe!==(fe=ne(a))&&(ce.d(1),ce=fe(a),ce&&(ce.c(),ce.m(x,m))),ae[0]&1048576&&_!==(_=a[83].label+"")&&ke(M,_),ae[0]&1048576&&P!==(P="inline-flex items-center gap-1 rounded-full border px-2.5 py-0.5 text-xs font-semibold "+a[83].color+" "+a[83].border)&&r(x,"class",P),y!==(y=he(a))&&(H.d(1),H=y(a),H&&(H.c(),H.m(Q,se))),ae[0]&1048576&&W!==(W="flex items-center gap-1 text-xs "+((De=a[82].assets)!=null&&De.hasPoster?"text-green-500":"text-red-500"))&&r(Q,"class",W),Se!==(Se=Oe(a))&&(Ce.d(1),Ce=Se(a),Ce&&(Ce.c(),Ce.m(S,J))),ae[0]&1048576&&R!==(R="flex items-center gap-1 text-xs "+((Ve=a[82].assets)!=null&&Ve.hasNfo?"text-green-500":"text-red-500"))&&r(S,"class",R),ae[0]&1048592&&Be!==(Be="border-b border-border hover:bg-accent/50 cursor-pointer "+(a[4].has(a[82].path)?"bg-accent/30 border-l-2 border-l-primary":""))&&r(e,"class",Be)},d(ve){ve&&o(e),X.d(),ce.d(),H.d(),Ce.d(),Te=!1,bt(we)}}}function Vs(a){let e,t,l,n,u,f,v,z=a[14]?"处理中...":"自动刮削",B,T,K,ee,p,E,j,O,D,re,A,g=a[16].total>0&&Ns(a);function I(_,M){return _[15]?_r:mr}let x=I(a),m=x(a);return{c(){e=d("div"),g&&g.c(),t=w(),l=d("div"),n=d("div"),m.c(),u=w(),f=d("div"),v=d("button"),B=Z(z),T=w(),K=d("button"),ee=Z("刷新元数据"),p=w(),E=d("button"),j=Z("重新匹配"),this.h()},l(_){e=i(_,"DIV",{class:!0});var M=c(e);g&&g.l(M),t=k(M),l=i(M,"DIV",{class:!0});var P=c(l);n=i(P,"DIV",{class:!0});var b=c(n);m.l(b),b.forEach(o),u=k(P),f=i(P,"DIV",{class:!0});var L=c(f);v=i(L,"BUTTON",{class:!0});var le=c(v);B=Y(le,z),le.forEach(o),T=k(L),K=i(L,"BUTTON",{class:!0});var Q=c(K);ee=Y(Q,"刷新元数据"),Q.forEach(o),p=k(L),E=i(L,"BUTTON",{class:!0});var se=c(E);j=Y(se,"重新匹配"),se.forEach(o),L.forEach(o),P.forEach(o),M.forEach(o),this.h()},h(){r(n,"class","flex items-center gap-4"),r(v,"class","inline-flex items-center justify-center rounded-md text-sm font-medium h-9 px-4 py-2 bg-primary text-primary-foreground hover:opacity-90 disabled:opacity-50"),v.disabled=a[14],r(K,"class","inline-flex items-center justify-center rounded-md text-sm font-medium h-9 px-4 py-2 bg-secondary text-secondary-foreground hover:opacity-90 disabled:opacity-50"),K.disabled=a[14],r(E,"class","inline-flex items-center justify-center rounded-md text-sm font-medium h-9 px-4 py-2 bg-secondary text-secondary-foreground hover:opacity-90 disabled:opacity-50"),E.disabled=a[14],r(f,"class","flex gap-2"),r(l,"class","container mx-auto flex items-center justify-between p-4"),r(e,"class","fixed bottom-0 left-0 right-0 border-t border-border bg-card shadow-lg z-40")},m(_,M){ie(_,e,M),g&&g.m(e,null),s(e,t),s(e,l),s(l,n),m.m(n,null),s(l,u),s(l,f),s(f,v),s(v,B),s(f,T),s(f,K),s(K,ee),s(f,p),s(f,E),s(E,j),D=!0,re||(A=[me(v,"click",a[29]),me(K,"click",a[31]),me(E,"click",a[32])],re=!0)},p(_,M){_[16].total>0?g?g.p(_,M):(g=Ns(_),g.c(),g.m(e,t)):g&&(g.d(1),g=null),x===(x=I(_))&&m?m.p(_,M):(m.d(1),m=x(_),m&&(m.c(),m.m(n,null))),(!D||M[0]&16384)&&z!==(z=_[14]?"处理中...":"自动刮削")&&ke(B,z),(!D||M[0]&16384)&&(v.disabled=_[14]),(!D||M[0]&16384)&&(K.disabled=_[14]),(!D||M[0]&16384)&&(E.disabled=_[14])},i(_){D||(_&&vt(()=>{D&&(O||(O=Ge(e,Wt,{y:100,duration:250,easing:mt},!0)),O.run(1))}),D=!0)},o(_){_&&(O||(O=Ge(e,Wt,{y:100,duration:250,easing:mt},!1)),O.run(0)),D=!1},d(_){_&&o(e),g&&g.d(),m.d(),_&&O&&O.end(),re=!1,bt(A)}}}function Ns(a){let e,t;return{c(){e=d("div"),t=d("div"),this.h()},l(l){e=i(l,"DIV",{class:!0});var n=c(e);t=i(n,"DIV",{class:!0,style:!0}),c(t).forEach(o),n.forEach(o),this.h()},h(){r(t,"class","h-full bg-linear-to-r from-primary to-green-500 transition-all duration-300"),ys(t,"width",a[16].current/a[16].total*100+"%"),r(e,"class","h-1 bg-muted")},m(l,n){ie(l,e,n),s(e,t)},p(l,n){n[0]&65536&&ys(t,"width",l[16].current/l[16].total*100+"%")},d(l){l&&o(e)}}}function mr(a){let e,t,l=a[4].size+"",n,u;return{c(){e=d("span"),t=Z("已选择 "),n=Z(l),u=Z(" 部剧集"),this.h()},l(f){e=i(f,"SPAN",{class:!0});var v=c(e);t=Y(v,"已选择 "),n=Y(v,l),u=Y(v," 部剧集"),v.forEach(o),this.h()},h(){r(e,"class","text-sm text-muted-foreground")},m(f,v){ie(f,e,v),s(e,t),s(e,n),s(e,u)},p(f,v){v[0]&16&&l!==(l=f[4].size+"")&&ke(n,l)},d(f){f&&o(e)}}}function _r(a){let e,t;return{c(){e=d("span"),t=Z(a[15]),this.h()},l(l){e=i(l,"SPAN",{class:!0});var n=c(e);t=Y(n,a[15]),n.forEach(o),this.h()},h(){r(e,"class","text-sm font-medium")},m(l,n){ie(l,e,n),s(e,t)},p(l,n){n[0]&32768&&ke(t,l[15])},d(l){l&&o(e)}}}function Ps(a){var ps,ms;let e,t,l,n,u,f,v,z="剧集详情",B,T,K='<svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 6 6 18"></path><path d="m6 6 12 12"></path></svg>',ee,p,E,j,O=a[6].name+"",D,re,A,g,I,x="TMDB ID",m,_,M=a[6].tmdbId?`#${a[6].tmdbId}`:"未匹配",P,b,L,le,Q="状态",se,W,C=os(a[6].groupStatus).label+"",S,J,R,N,$="季数",te,oe,de=a[6].seasons.length+"",ue,Ee,ye,be,Be="集数",Te,we,_e=(a[6].seasons.reduce(zs,0)||24)+"",Ne,Le,X,ne,fe="路径",ce,he,y=a[6].path+"",H,Oe,Se,Ce,Je="完整性",Xe,je,Me,ve,ae,De,Ve,Qe,Ye,it,qe,lt,$e,h,V,q,ge="季/集文件",Ae,Pe,Bt,Ke,We,us="操作",Zt,st,at,Tt=a[14]?"处理中...":((ps=a[6])==null?void 0:ps.groupStatus)==="unscraped"||!((ms=a[6])!=null&&ms.tmdbId)?"刮削":"补刮",Mt,Jt,nt,Xt,Vt,$t,dt,cs="重新匹配",es,ft,Fe,ts,is;function ds(G,xe){var Ie;return(Ie=G[6].assets)!=null&&Ie.hasPoster?br:vr}let Nt=ds(a),ot=Nt(a);function fs(G,xe){var Ie;return(Ie=G[6].assets)!=null&&Ie.hasNfo?kr:gr}let Pt=fs(a),ut=Pt(a);function hs(G,xe){var Ie;return(Ie=G[6].assets)!=null&&Ie.hasFanart?Er:wr}let jt=hs(a),ct=jt(a),gt=pt(a[6].seasons.sort(Rs)),Ue=[];for(let G=0;G<gt.length;G+=1)Ue[G]=As(Ts(a,gt,G));let ze=a[15]&&Ls(a);return{c(){e=d("div"),t=d("button"),n=w(),u=d("div"),f=d("div"),v=d("h2"),v.textContent=z,B=w(),T=d("button"),T.innerHTML=K,ee=w(),p=d("div"),E=d("div"),j=d("h3"),D=Z(O),re=w(),A=d("div"),g=d("div"),I=d("p"),I.textContent=x,m=w(),_=d("p"),P=Z(M),b=w(),L=d("div"),le=d("p"),le.textContent=Q,se=w(),W=d("p"),S=Z(C),J=w(),R=d("div"),N=d("p"),N.textContent=$,te=w(),oe=d("p"),ue=Z(de),Ee=w(),ye=d("div"),be=d("p"),be.textContent=Be,Te=w(),we=d("p"),Ne=Z(_e),Le=w(),X=d("div"),ne=d("p"),ne.textContent=fe,ce=w(),he=d("p"),H=Z(y),Oe=w(),Se=d("div"),Ce=d("p"),Ce.textContent=Je,Xe=w(),je=d("div"),Me=d("span"),ot.c(),ve=Z(`
              海报`),De=w(),Ve=d("span"),ut.c(),Qe=Z(`
              NFO`),it=w(),qe=d("span"),ct.c(),lt=Z(`
              Fanart`),h=w(),V=d("div"),q=d("p"),q.textContent=ge,Ae=w(),Pe=d("div");for(let G=0;G<Ue.length;G+=1)Ue[G].c();Bt=w(),Ke=d("div"),We=d("p"),We.textContent=us,Zt=w(),st=d("div"),at=d("button"),Mt=Z(Tt),Jt=w(),nt=d("button"),Xt=Z("刷新元数据"),$t=w(),dt=d("button"),dt.textContent=cs,es=w(),ze&&ze.c(),this.h()},l(G){e=i(G,"DIV",{class:!0});var xe=c(e);t=i(xe,"BUTTON",{class:!0}),c(t).forEach(o),n=k(xe),u=i(xe,"DIV",{class:!0});var Ie=c(u);f=i(Ie,"DIV",{class:!0});var rt=c(f);v=i(rt,"H2",{class:!0,"data-svelte-h":!0}),pe(v)!=="svelte-n9tf6v"&&(v.textContent=z),B=k(rt),T=i(rt,"BUTTON",{class:!0,"data-svelte-h":!0}),pe(T)!=="svelte-2nps8z"&&(T.innerHTML=K),rt.forEach(o),ee=k(Ie),p=i(Ie,"DIV",{class:!0});var Re=c(p);E=i(Re,"DIV",{});var Dt=c(E);j=i(Dt,"H3",{class:!0});var It=c(j);D=Y(It,O),It.forEach(o),Dt.forEach(o),re=k(Re),A=i(Re,"DIV",{class:!0});var et=c(A);g=i(et,"DIV",{});var He=c(g);I=i(He,"P",{class:!0,"data-svelte-h":!0}),pe(I)!=="svelte-1k1hw98"&&(I.textContent=x),m=k(He),_=i(He,"P",{class:!0});var St=c(_);P=Y(St,M),St.forEach(o),He.forEach(o),b=k(et),L=i(et,"DIV",{});var At=c(L);le=i(At,"P",{class:!0,"data-svelte-h":!0}),pe(le)!=="svelte-jzx24d"&&(le.textContent=Q),se=k(At),W=i(At,"P",{class:!0});var _s=c(W);S=Y(_s,C),_s.forEach(o),At.forEach(o),J=k(et),R=i(et,"DIV",{});var Lt=c(R);N=i(Lt,"P",{class:!0,"data-svelte-h":!0}),pe(N)!=="svelte-pwodfb"&&(N.textContent=$),te=k(Lt),oe=i(Lt,"P",{class:!0});var vs=c(oe);ue=Y(vs,de),vs.forEach(o),Lt.forEach(o),Ee=k(et),ye=i(et,"DIV",{});var Ot=c(ye);be=i(Ot,"P",{class:!0,"data-svelte-h":!0}),pe(be)!=="svelte-1fhetww"&&(be.textContent=Be),Te=k(Ot),we=i(Ot,"P",{class:!0});var bs=c(we);Ne=Y(bs,_e),bs.forEach(o),Ot.forEach(o),et.forEach(o),Le=k(Re),X=i(Re,"DIV",{});var Ft=c(X);ne=i(Ft,"P",{class:!0,"data-svelte-h":!0}),pe(ne)!=="svelte-6oqzvz"&&(ne.textContent=fe),ce=k(Ft),he=i(Ft,"P",{class:!0});var gs=c(he);H=Y(gs,y),gs.forEach(o),Ft.forEach(o),Oe=k(Re),Se=i(Re,"DIV",{});var Ut=c(Se);Ce=i(Ut,"P",{class:!0,"data-svelte-h":!0}),pe(Ce)!=="svelte-10jdl1z"&&(Ce.textContent=Je),Xe=k(Ut),je=i(Ut,"DIV",{class:!0});var kt=c(je);Me=i(kt,"SPAN",{class:!0});var ss=c(Me);ot.l(ss),ve=Y(ss,`
              海报`),ss.forEach(o),De=k(kt),Ve=i(kt,"SPAN",{class:!0});var rs=c(Ve);ut.l(rs),Qe=Y(rs,`
              NFO`),rs.forEach(o),it=k(kt),qe=i(kt,"SPAN",{class:!0});var ls=c(qe);ct.l(ls),lt=Y(ls,`
              Fanart`),ls.forEach(o),kt.forEach(o),Ut.forEach(o),h=k(Re),V=i(Re,"DIV",{});var Ht=c(V);q=i(Ht,"P",{class:!0,"data-svelte-h":!0}),pe(q)!=="svelte-fmkd7j"&&(q.textContent=ge),Ae=k(Ht),Pe=i(Ht,"DIV",{class:!0});var ks=c(Pe);for(let as=0;as<Ue.length;as+=1)Ue[as].l(ks);ks.forEach(o),Ht.forEach(o),Bt=k(Re),Ke=i(Re,"DIV",{class:!0});var wt=c(Ke);We=i(wt,"P",{class:!0,"data-svelte-h":!0}),pe(We)!=="svelte-5tqjb3"&&(We.textContent=us),Zt=k(wt),st=i(wt,"DIV",{class:!0});var Et=c(st);at=i(Et,"BUTTON",{class:!0});var ws=c(at);Mt=Y(ws,Tt),ws.forEach(o),Jt=k(Et),nt=i(Et,"BUTTON",{class:!0});var Es=c(nt);Xt=Y(Es,"刷新元数据"),Es.forEach(o),$t=k(Et),dt=i(Et,"BUTTON",{class:!0,"data-svelte-h":!0}),pe(dt)!=="svelte-17zzf2w"&&(dt.textContent=cs),Et.forEach(o),es=k(wt),ze&&ze.l(wt),wt.forEach(o),Re.forEach(o),Ie.forEach(o),xe.forEach(o),this.h()},h(){var G,xe,Ie,rt;r(t,"class","absolute inset-0 bg-black/50"),r(v,"class","text-lg font-semibold"),r(T,"class","inline-flex items-center justify-center rounded-md h-8 w-8 hover:bg-accent"),r(f,"class","sticky top-0 flex items-center justify-between border-b border-border bg-card p-4"),r(j,"class","text-xl font-bold mb-2"),r(I,"class","text-muted-foreground"),r(_,"class","font-medium"),r(le,"class","text-muted-foreground"),r(W,"class","font-medium"),r(N,"class","text-muted-foreground"),r(oe,"class","font-medium"),r(be,"class","text-muted-foreground"),r(we,"class","font-medium"),r(A,"class","grid grid-cols-2 gap-4 text-sm"),r(ne,"class","text-sm text-muted-foreground mb-2"),r(he,"class","font-mono text-xs bg-muted p-2 rounded"),r(Ce,"class","text-sm text-muted-foreground mb-2"),r(Me,"class",ae="flex items-center gap-1 text-sm "+((G=a[6].assets)!=null&&G.hasPoster?"text-green-500":"text-red-500")),r(Ve,"class",Ye="flex items-center gap-1 text-sm "+((xe=a[6].assets)!=null&&xe.hasNfo?"text-green-500":"text-red-500")),r(qe,"class",$e="flex items-center gap-1 text-sm "+((Ie=a[6].assets)!=null&&Ie.hasFanart?"text-green-500":"text-red-500")),r(je,"class","flex gap-4"),r(q,"class","text-sm text-muted-foreground mb-2"),r(Pe,"class","space-y-2 max-h-80 overflow-y-auto"),r(We,"class","text-sm text-muted-foreground"),r(at,"class","inline-flex items-center justify-center rounded-md text-sm font-medium h-9 px-4 py-2 bg-primary text-primary-foreground hover:opacity-90 disabled:opacity-50"),at.disabled=a[14],r(nt,"class","inline-flex items-center justify-center rounded-md text-sm font-medium h-9 px-4 py-2 bg-secondary text-secondary-foreground hover:opacity-90 disabled:opacity-50"),nt.disabled=Vt=a[14]||!((rt=a[6])!=null&&rt.tmdbId),r(dt,"class","inline-flex items-center justify-center rounded-md text-sm font-medium h-9 px-4 py-2 bg-secondary text-secondary-foreground hover:opacity-90"),r(st,"class","flex flex-wrap gap-2"),r(Ke,"class","space-y-2"),r(p,"class","p-4 space-y-6"),r(u,"class","absolute right-0 top-0 bottom-0 w-full max-w-lg bg-card border-l border-border overflow-y-auto"),r(e,"class","fixed inset-0 z-50")},m(G,xe){ie(G,e,xe),s(e,t),s(e,n),s(e,u),s(u,f),s(f,v),s(f,B),s(f,T),s(u,ee),s(u,p),s(p,E),s(E,j),s(j,D),s(p,re),s(p,A),s(A,g),s(g,I),s(g,m),s(g,_),s(_,P),s(A,b),s(A,L),s(L,le),s(L,se),s(L,W),s(W,S),s(A,J),s(A,R),s(R,N),s(R,te),s(R,oe),s(oe,ue),s(A,Ee),s(A,ye),s(ye,be),s(ye,Te),s(ye,we),s(we,Ne),s(p,Le),s(p,X),s(X,ne),s(X,ce),s(X,he),s(he,H),s(p,Oe),s(p,Se),s(Se,Ce),s(Se,Xe),s(Se,je),s(je,Me),ot.m(Me,null),s(Me,ve),s(je,De),s(je,Ve),ut.m(Ve,null),s(Ve,Qe),s(je,it),s(je,qe),ct.m(qe,null),s(qe,lt),s(p,h),s(p,V),s(V,q),s(V,Ae),s(V,Pe);for(let Ie=0;Ie<Ue.length;Ie+=1)Ue[Ie]&&Ue[Ie].m(Pe,null);s(p,Bt),s(p,Ke),s(Ke,We),s(Ke,Zt),s(Ke,st),s(st,at),s(at,Mt),s(st,Jt),s(st,nt),s(nt,Xt),s(st,$t),s(st,dt),s(Ke,es),ze&&ze.m(Ke,null),Fe=!0,ts||(is=[me(t,"click",a[24]),me(T,"click",a[24]),me(at,"click",a[52]),me(nt,"click",a[53]),me(dt,"click",a[54])],ts=!0)},p(G,xe){var Ie,rt,Re,Dt,It,et;if((!Fe||xe[0]&64)&&O!==(O=G[6].name+"")&&ke(D,O),(!Fe||xe[0]&64)&&M!==(M=G[6].tmdbId?`#${G[6].tmdbId}`:"未匹配")&&ke(P,M),(!Fe||xe[0]&64)&&C!==(C=os(G[6].groupStatus).label+"")&&ke(S,C),(!Fe||xe[0]&64)&&de!==(de=G[6].seasons.length+"")&&ke(ue,de),(!Fe||xe[0]&64)&&_e!==(_e=(G[6].seasons.reduce(zs,0)||24)+"")&&ke(Ne,_e),(!Fe||xe[0]&64)&&y!==(y=G[6].path+"")&&ke(H,y),Nt!==(Nt=ds(G))&&(ot.d(1),ot=Nt(G),ot&&(ot.c(),ot.m(Me,ve))),(!Fe||xe[0]&64&&ae!==(ae="flex items-center gap-1 text-sm "+((Ie=G[6].assets)!=null&&Ie.hasPoster?"text-green-500":"text-red-500")))&&r(Me,"class",ae),Pt!==(Pt=fs(G))&&(ut.d(1),ut=Pt(G),ut&&(ut.c(),ut.m(Ve,Qe))),(!Fe||xe[0]&64&&Ye!==(Ye="flex items-center gap-1 text-sm "+((rt=G[6].assets)!=null&&rt.hasNfo?"text-green-500":"text-red-500")))&&r(Ve,"class",Ye),jt!==(jt=hs(G))&&(ct.d(1),ct=jt(G),ct&&(ct.c(),ct.m(qe,lt))),(!Fe||xe[0]&64&&$e!==($e="flex items-center gap-1 text-sm "+((Re=G[6].assets)!=null&&Re.hasFanart?"text-green-500":"text-red-500")))&&r(qe,"class",$e),xe[0]&16448|xe[1]&112){gt=pt(G[6].seasons.sort(Rs));let He;for(He=0;He<gt.length;He+=1){const St=Ts(G,gt,He);Ue[He]?Ue[He].p(St,xe):(Ue[He]=As(St),Ue[He].c(),Ue[He].m(Pe,null))}for(;He<Ue.length;He+=1)Ue[He].d(1);Ue.length=gt.length}(!Fe||xe[0]&16448)&&Tt!==(Tt=G[14]?"处理中...":((Dt=G[6])==null?void 0:Dt.groupStatus)==="unscraped"||!((It=G[6])!=null&&It.tmdbId)?"刮削":"补刮")&&ke(Mt,Tt),(!Fe||xe[0]&16384)&&(at.disabled=G[14]),(!Fe||xe[0]&16448&&Vt!==(Vt=G[14]||!((et=G[6])!=null&&et.tmdbId)))&&(nt.disabled=Vt),G[15]?ze?ze.p(G,xe):(ze=Ls(G),ze.c(),ze.m(Ke,null)):ze&&(ze.d(1),ze=null)},i(G){Fe||(G&&vt(()=>{Fe&&(l||(l=Ge(t,yt,{duration:200},!0)),l.run(1))}),G&&vt(()=>{Fe&&(ft||(ft=Ge(u,Wt,{x:400,duration:300,easing:mt},!0)),ft.run(1))}),Fe=!0)},o(G){G&&(l||(l=Ge(t,yt,{duration:200},!1)),l.run(0)),G&&(ft||(ft=Ge(u,Wt,{x:400,duration:300,easing:mt},!1)),ft.run(0)),Fe=!1},d(G){G&&o(e),G&&l&&l.end(),ot.d(),ut.d(),ct.d(),Yt(Ue,G),ze&&ze.d(),G&&ft&&ft.end(),ts=!1,bt(is)}}}function vr(a){let e,t,l,n;return{c(){e=U("svg"),t=U("circle"),l=U("path"),n=U("path"),this.h()},l(u){e=F(u,"svg",{class:!0,viewBox:!0,fill:!0,stroke:!0,"stroke-width":!0});var f=c(e);t=F(f,"circle",{cx:!0,cy:!0,r:!0}),c(t).forEach(o),l=F(f,"path",{d:!0}),c(l).forEach(o),n=F(f,"path",{d:!0}),c(n).forEach(o),f.forEach(o),this.h()},h(){r(t,"cx","12"),r(t,"cy","12"),r(t,"r","10"),r(l,"d","m15 9-6 6"),r(n,"d","m9 9 6 6"),r(e,"class","h-4 w-4"),r(e,"viewBox","0 0 24 24"),r(e,"fill","none"),r(e,"stroke","currentColor"),r(e,"stroke-width","2")},m(u,f){ie(u,e,f),s(e,t),s(e,l),s(e,n)},d(u){u&&o(e)}}}function br(a){let e,t,l;return{c(){e=U("svg"),t=U("path"),l=U("path"),this.h()},l(n){e=F(n,"svg",{class:!0,viewBox:!0,fill:!0,stroke:!0,"stroke-width":!0});var u=c(e);t=F(u,"path",{d:!0}),c(t).forEach(o),l=F(u,"path",{d:!0}),c(l).forEach(o),u.forEach(o),this.h()},h(){r(t,"d","M22 11.08V12a10 10 0 1 1-5.93-9.14"),r(l,"d","m9 11 3 3L22 4"),r(e,"class","h-4 w-4"),r(e,"viewBox","0 0 24 24"),r(e,"fill","none"),r(e,"stroke","currentColor"),r(e,"stroke-width","2")},m(n,u){ie(n,e,u),s(e,t),s(e,l)},d(n){n&&o(e)}}}function gr(a){let e,t,l,n;return{c(){e=U("svg"),t=U("circle"),l=U("path"),n=U("path"),this.h()},l(u){e=F(u,"svg",{class:!0,viewBox:!0,fill:!0,stroke:!0,"stroke-width":!0});var f=c(e);t=F(f,"circle",{cx:!0,cy:!0,r:!0}),c(t).forEach(o),l=F(f,"path",{d:!0}),c(l).forEach(o),n=F(f,"path",{d:!0}),c(n).forEach(o),f.forEach(o),this.h()},h(){r(t,"cx","12"),r(t,"cy","12"),r(t,"r","10"),r(l,"d","m15 9-6 6"),r(n,"d","m9 9 6 6"),r(e,"class","h-4 w-4"),r(e,"viewBox","0 0 24 24"),r(e,"fill","none"),r(e,"stroke","currentColor"),r(e,"stroke-width","2")},m(u,f){ie(u,e,f),s(e,t),s(e,l),s(e,n)},d(u){u&&o(e)}}}function kr(a){let e,t,l;return{c(){e=U("svg"),t=U("path"),l=U("path"),this.h()},l(n){e=F(n,"svg",{class:!0,viewBox:!0,fill:!0,stroke:!0,"stroke-width":!0});var u=c(e);t=F(u,"path",{d:!0}),c(t).forEach(o),l=F(u,"path",{d:!0}),c(l).forEach(o),u.forEach(o),this.h()},h(){r(t,"d","M22 11.08V12a10 10 0 1 1-5.93-9.14"),r(l,"d","m9 11 3 3L22 4"),r(e,"class","h-4 w-4"),r(e,"viewBox","0 0 24 24"),r(e,"fill","none"),r(e,"stroke","currentColor"),r(e,"stroke-width","2")},m(n,u){ie(n,e,u),s(e,t),s(e,l)},d(n){n&&o(e)}}}function wr(a){let e,t,l,n;return{c(){e=U("svg"),t=U("circle"),l=U("path"),n=U("path"),this.h()},l(u){e=F(u,"svg",{class:!0,viewBox:!0,fill:!0,stroke:!0,"stroke-width":!0});var f=c(e);t=F(f,"circle",{cx:!0,cy:!0,r:!0}),c(t).forEach(o),l=F(f,"path",{d:!0}),c(l).forEach(o),n=F(f,"path",{d:!0}),c(n).forEach(o),f.forEach(o),this.h()},h(){r(t,"cx","12"),r(t,"cy","12"),r(t,"r","10"),r(l,"d","m15 9-6 6"),r(n,"d","m9 9 6 6"),r(e,"class","h-4 w-4"),r(e,"viewBox","0 0 24 24"),r(e,"fill","none"),r(e,"stroke","currentColor"),r(e,"stroke-width","2")},m(u,f){ie(u,e,f),s(e,t),s(e,l),s(e,n)},d(u){u&&o(e)}}}function Er(a){let e,t,l;return{c(){e=U("svg"),t=U("path"),l=U("path"),this.h()},l(n){e=F(n,"svg",{class:!0,viewBox:!0,fill:!0,stroke:!0,"stroke-width":!0});var u=c(e);t=F(u,"path",{d:!0}),c(t).forEach(o),l=F(u,"path",{d:!0}),c(l).forEach(o),u.forEach(o),this.h()},h(){r(t,"d","M22 11.08V12a10 10 0 1 1-5.93-9.14"),r(l,"d","m9 11 3 3L22 4"),r(e,"class","h-4 w-4"),r(e,"viewBox","0 0 24 24"),r(e,"fill","none"),r(e,"stroke","currentColor"),r(e,"stroke-width","2")},m(n,u){ie(n,e,u),s(e,t),s(e,l)},d(n){n&&o(e)}}}function js(a){let e,t,l,n,u=String(a[79].parsed.episode||0).padStart(2,"0")+"",f,v,z,B=a[79].name+"",T,K,ee,p,E,j=(a[79].size/1024/1024/1024).toFixed(2)+"",O,D,re,A,g,I,x,m,_,M,P,b,L;function le(){return a[51](a[76],a[79])}return{c(){e=d("div"),t=d("div"),l=d("span"),n=Z("E"),f=Z(u),v=w(),z=d("span"),T=Z(B),ee=w(),p=d("div"),E=d("span"),O=Z(j),D=Z(" GB"),re=w(),A=d("button"),g=U("svg"),I=U("path"),x=U("path"),m=U("path"),_=U("path"),P=w(),this.h()},l(Q){e=i(Q,"DIV",{class:!0});var se=c(e);t=i(se,"DIV",{class:!0});var W=c(t);l=i(W,"SPAN",{class:!0});var C=c(l);n=Y(C,"E"),f=Y(C,u),C.forEach(o),v=k(W),z=i(W,"SPAN",{class:!0,title:!0});var S=c(z);T=Y(S,B),S.forEach(o),W.forEach(o),ee=k(se),p=i(se,"DIV",{class:!0});var J=c(p);E=i(J,"SPAN",{class:!0});var R=c(E);O=Y(R,j),D=Y(R," GB"),R.forEach(o),re=k(J),A=i(J,"BUTTON",{class:!0,title:!0});var N=c(A);g=F(N,"svg",{class:!0,viewBox:!0,fill:!0,stroke:!0,"stroke-width":!0});var $=c(g);I=F($,"path",{d:!0}),c(I).forEach(o),x=F($,"path",{d:!0}),c(x).forEach(o),m=F($,"path",{d:!0}),c(m).forEach(o),_=F($,"path",{d:!0}),c(_).forEach(o),$.forEach(o),N.forEach(o),J.forEach(o),P=k(se),se.forEach(o),this.h()},h(){var Q;r(l,"class","text-muted-foreground shrink-0"),r(z,"class","truncate"),r(z,"title",K=a[79].name),r(t,"class","flex items-center gap-2 flex-1 min-w-0"),r(E,"class","text-muted-foreground mr-2"),r(I,"d","M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"),r(x,"d","M3 3v5h5"),r(m,"d","M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"),r(_,"d","M16 16h5v5"),r(g,"class","h-3 w-3"),r(g,"viewBox","0 0 24 24"),r(g,"fill","none"),r(g,"stroke","currentColor"),r(g,"stroke-width","2"),r(A,"class","inline-flex items-center justify-center rounded h-5 w-5 opacity-0 group-hover/ep:opacity-100 hover:bg-accent text-muted-foreground hover:text-foreground transition-opacity"),r(A,"title","刷新该集元数据"),A.disabled=M=a[14]||!((Q=a[6])!=null&&Q.tmdbId),r(p,"class","flex items-center gap-1 shrink-0 ml-2"),r(e,"class","flex items-center justify-between p-2 rounded-md hover:bg-muted/30 text-xs group/ep")},m(Q,se){ie(Q,e,se),s(e,t),s(t,l),s(l,n),s(l,f),s(t,v),s(t,z),s(z,T),s(e,ee),s(e,p),s(p,E),s(E,O),s(E,D),s(p,re),s(p,A),s(A,g),s(g,I),s(g,x),s(g,m),s(g,_),s(e,P),b||(L=me(A,"click",le),b=!0)},p(Q,se){var W;a=Q,se[0]&64&&u!==(u=String(a[79].parsed.episode||0).padStart(2,"0")+"")&&ke(f,u),se[0]&64&&B!==(B=a[79].name+"")&&ke(T,B),se[0]&64&&K!==(K=a[79].name)&&r(z,"title",K),se[0]&64&&j!==(j=(a[79].size/1024/1024/1024).toFixed(2)+"")&&ke(O,j),se[0]&16448&&M!==(M=a[14]||!((W=a[6])!=null&&W.tmdbId))&&(A.disabled=M)},d(Q){Q&&o(e),b=!1,L()}}}function As(a){let e,t,l,n,u,f=a[76].season+"",v,z,B,T,K=a[76].episodes.length+"",ee,p,E,j,O,D,re,A,g,I,x,m,_,M,P,b,L,le,Q,se,W,C;function S(){return a[49](a[76])}function J(){return a[50](a[76])}let R=pt(a[76].episodes.sort(qs)),N=[];for(let $=0;$<R.length;$+=1)N[$]=js(Ds(a,R,$));return{c(){e=d("details"),t=d("summary"),l=d("div"),n=d("span"),u=Z("第 "),v=Z(f),z=Z(" 季"),B=w(),T=d("span"),ee=Z(K),p=Z(" 集"),E=w(),j=d("div"),O=d("button"),D=U("svg"),re=U("path"),A=U("path"),g=U("path"),I=U("path"),m=w(),_=d("button"),M=U("svg"),P=U("path"),b=U("path"),le=w(),Q=d("div");for(let $=0;$<N.length;$+=1)N[$].c();se=w(),this.h()},l($){e=i($,"DETAILS",{class:!0});var te=c(e);t=i(te,"SUMMARY",{class:!0});var oe=c(t);l=i(oe,"DIV",{class:!0});var de=c(l);n=i(de,"SPAN",{class:!0});var ue=c(n);u=Y(ue,"第 "),v=Y(ue,f),z=Y(ue," 季"),ue.forEach(o),B=k(de),T=i(de,"SPAN",{class:!0});var Ee=c(T);ee=Y(Ee,K),p=Y(Ee," 集"),Ee.forEach(o),de.forEach(o),E=k(oe),j=i(oe,"DIV",{class:!0});var ye=c(j);O=i(ye,"BUTTON",{class:!0,title:!0});var be=c(O);D=F(be,"svg",{class:!0,viewBox:!0,fill:!0,stroke:!0,"stroke-width":!0});var Be=c(D);re=F(Be,"path",{d:!0}),c(re).forEach(o),A=F(Be,"path",{d:!0}),c(A).forEach(o),g=F(Be,"path",{d:!0}),c(g).forEach(o),I=F(Be,"path",{d:!0}),c(I).forEach(o),Be.forEach(o),be.forEach(o),m=k(ye),_=i(ye,"BUTTON",{class:!0,title:!0});var Te=c(_);M=F(Te,"svg",{class:!0,viewBox:!0,fill:!0,stroke:!0,"stroke-width":!0});var we=c(M);P=F(we,"path",{d:!0}),c(P).forEach(o),b=F(we,"path",{d:!0}),c(b).forEach(o),we.forEach(o),Te.forEach(o),ye.forEach(o),oe.forEach(o),le=k(te),Q=i(te,"DIV",{class:!0});var _e=c(Q);for(let Ne=0;Ne<N.length;Ne+=1)N[Ne].l(_e);_e.forEach(o),se=k(te),te.forEach(o),this.h()},h(){var $,te;r(n,"class","text-sm font-medium"),r(T,"class","text-xs text-muted-foreground"),r(l,"class","flex items-center gap-2"),r(re,"d","M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"),r(A,"d","M3 3v5h5"),r(g,"d","M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"),r(I,"d","M16 16h5v5"),r(D,"class","h-3.5 w-3.5"),r(D,"viewBox","0 0 24 24"),r(D,"fill","none"),r(D,"stroke","currentColor"),r(D,"stroke-width","2"),r(O,"class","inline-flex items-center justify-center rounded h-6 w-6 hover:bg-accent text-muted-foreground hover:text-foreground"),r(O,"title","刷新该季元数据"),O.disabled=x=a[14]||!(($=a[6])!=null&&$.tmdbId),r(P,"d","M12 5v14"),r(b,"d","M5 12h14"),r(M,"class","h-3.5 w-3.5"),r(M,"viewBox","0 0 24 24"),r(M,"fill","none"),r(M,"stroke","currentColor"),r(M,"stroke-width","2"),r(_,"class","inline-flex items-center justify-center rounded h-6 w-6 hover:bg-accent text-muted-foreground hover:text-foreground"),r(_,"title","补刮该季新增"),_.disabled=L=a[14]||!((te=a[6])!=null&&te.tmdbId),r(j,"class","flex items-center gap-1"),r(t,"class","flex items-center justify-between cursor-pointer p-2 rounded-md bg-muted/50 hover:bg-muted"),r(Q,"class","mt-1 ml-4 space-y-1"),r(e,"class","group")},m($,te){ie($,e,te),s(e,t),s(t,l),s(l,n),s(n,u),s(n,v),s(n,z),s(l,B),s(l,T),s(T,ee),s(T,p),s(t,E),s(t,j),s(j,O),s(O,D),s(D,re),s(D,A),s(D,g),s(D,I),s(j,m),s(j,_),s(_,M),s(M,P),s(M,b),s(e,le),s(e,Q);for(let oe=0;oe<N.length;oe+=1)N[oe]&&N[oe].m(Q,null);s(e,se),W||(C=[me(O,"click",S),me(_,"click",J),me(j,"click",qt(a[38]))],W=!0)},p($,te){var oe,de;if(a=$,te[0]&64&&f!==(f=a[76].season+"")&&ke(v,f),te[0]&64&&K!==(K=a[76].episodes.length+"")&&ke(ee,K),te[0]&16448&&x!==(x=a[14]||!((oe=a[6])!=null&&oe.tmdbId))&&(O.disabled=x),te[0]&16448&&L!==(L=a[14]||!((de=a[6])!=null&&de.tmdbId))&&(_.disabled=L),te[0]&16448|te[1]&32){R=pt(a[76].episodes.sort(qs));let ue;for(ue=0;ue<R.length;ue+=1){const Ee=Ds(a,R,ue);N[ue]?N[ue].p(Ee,te):(N[ue]=js(Ee),N[ue].c(),N[ue].m(Q,null))}for(;ue<N.length;ue+=1)N[ue].d(1);N.length=R.length}},d($){$&&o(e),Yt(N,$),W=!1,bt(C)}}}function Ls(a){let e,t;return{c(){e=d("p"),t=Z(a[15]),this.h()},l(l){e=i(l,"P",{class:!0});var n=c(e);t=Y(n,a[15]),n.forEach(o),this.h()},h(){r(e,"class","text-sm text-muted-foreground")},m(l,n){ie(l,e,n),s(e,t)},p(l,n){n[0]&32768&&ke(t,l[15])},d(l){l&&o(e)}}}function Os(a){let e,t,l,n,u,f,v,z="TMDB 搜索",B,T,K='<svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 6 6 18"></path><path d="m6 6 12 12"></path></svg>',ee,p,E,j,O,D,re=a[10]?"搜索中...":"搜索",A,g,I,x,m,_,M="取消",P,b,L,le;function Q(C,S){if(C[9].length>0)return yr;if(!C[10])return xr}let se=Q(a),W=se&&se(a);return{c(){e=d("div"),t=d("button"),n=w(),u=d("div"),f=d("div"),v=d("h2"),v.textContent=z,B=w(),T=d("button"),T.innerHTML=K,ee=w(),p=d("div"),E=d("div"),j=d("input"),O=w(),D=d("button"),A=Z(re),g=w(),I=d("div"),W&&W.c(),x=w(),m=d("div"),_=d("button"),_.textContent=M,this.h()},l(C){e=i(C,"DIV",{class:!0});var S=c(e);t=i(S,"BUTTON",{class:!0}),c(t).forEach(o),n=k(S),u=i(S,"DIV",{class:!0});var J=c(u);f=i(J,"DIV",{class:!0});var R=c(f);v=i(R,"H2",{class:!0,"data-svelte-h":!0}),pe(v)!=="svelte-1dq97nw"&&(v.textContent=z),B=k(R),T=i(R,"BUTTON",{class:!0,"data-svelte-h":!0}),pe(T)!=="svelte-tcsr7s"&&(T.innerHTML=K),R.forEach(o),ee=k(J),p=i(J,"DIV",{class:!0});var N=c(p);E=i(N,"DIV",{class:!0});var $=c(E);j=i($,"INPUT",{type:!0,class:!0,placeholder:!0}),O=k($),D=i($,"BUTTON",{class:!0});var te=c(D);A=Y(te,re),te.forEach(o),$.forEach(o),g=k(N),I=i(N,"DIV",{class:!0});var oe=c(I);W&&W.l(oe),oe.forEach(o),N.forEach(o),x=k(J),m=i(J,"DIV",{class:!0});var de=c(m);_=i(de,"BUTTON",{class:!0,"data-svelte-h":!0}),pe(_)!=="svelte-k2omh7"&&(_.textContent=M),de.forEach(o),J.forEach(o),S.forEach(o),this.h()},h(){r(t,"class","absolute inset-0 bg-black/50"),r(v,"class","text-lg font-semibold"),r(T,"class","inline-flex items-center justify-center rounded-md h-8 w-8 hover:bg-accent"),r(f,"class","flex items-center justify-between border-b border-border p-4"),r(j,"type","text"),r(j,"class","flex-1 h-10 rounded-md border border-input bg-background px-3 text-sm"),r(j,"placeholder","输入搜索关键词..."),r(D,"class","inline-flex items-center justify-center rounded-md text-sm font-medium h-10 px-4 py-2 bg-primary text-primary-foreground hover:opacity-90 disabled:opacity-50"),D.disabled=a[10],r(E,"class","flex gap-2"),r(I,"class","max-h-80 overflow-y-auto space-y-2"),r(p,"class","p-4 space-y-4"),r(_,"class","inline-flex items-center justify-center rounded-md text-sm font-medium h-9 px-4 py-2 border border-input bg-background hover:bg-accent"),r(m,"class","flex justify-end gap-2 border-t border-border p-4"),r(u,"class","relative w-full max-w-xl bg-card border border-border rounded-lg shadow-lg overflow-hidden"),r(e,"class","fixed inset-0 z-50 flex items-center justify-center")},m(C,S){ie(C,e,S),s(e,t),s(e,n),s(e,u),s(u,f),s(f,v),s(f,B),s(f,T),s(u,ee),s(u,p),s(p,E),s(E,j),xt(j,a[8]),s(E,O),s(E,D),s(D,A),s(p,g),s(p,I),W&&W.m(I,null),s(u,x),s(u,m),s(m,_),b=!0,L||(le=[me(t,"click",a[27]),me(T,"click",a[27]),me(j,"input",a[55]),me(j,"keydown",a[56]),me(D,"click",a[25]),me(_,"click",a[27])],L=!0)},p(C,S){S[0]&256&&j.value!==C[8]&&xt(j,C[8]),(!b||S[0]&1024)&&re!==(re=C[10]?"搜索中...":"搜索")&&ke(A,re),(!b||S[0]&1024)&&(D.disabled=C[10]),se===(se=Q(C))&&W?W.p(C,S):(W&&W.d(1),W=se&&se(C),W&&(W.c(),W.m(I,null)))},i(C){b||(C&&vt(()=>{b&&(l||(l=Ge(t,yt,{duration:200},!0)),l.run(1))}),C&&vt(()=>{b&&(P||(P=Ge(u,Qt,{duration:200,start:.95,easing:mt},!0)),P.run(1))}),b=!0)},o(C){C&&(l||(l=Ge(t,yt,{duration:200},!1)),l.run(0)),C&&(P||(P=Ge(u,Qt,{duration:200,start:.95,easing:mt},!1)),P.run(0)),b=!1},d(C){C&&o(e),C&&l&&l.end(),W&&W.d(),C&&P&&P.end(),L=!1,bt(le)}}}function xr(a){let e,t="输入关键词搜索 TMDB";return{c(){e=d("p"),e.textContent=t,this.h()},l(l){e=i(l,"P",{class:!0,"data-svelte-h":!0}),pe(e)!=="svelte-1kihksy"&&(e.textContent=t),this.h()},h(){r(e,"class","text-center text-muted-foreground py-8")},m(l,n){ie(l,e,n)},p:Ct,d(l){l&&o(e)}}}function yr(a){let e,t=pt(a[9]),l=[];for(let n=0;n<t.length;n+=1)l[n]=Fs(Bs(a,t,n));return{c(){for(let n=0;n<l.length;n+=1)l[n].c();e=Kt()},l(n){for(let u=0;u<l.length;u+=1)l[u].l(n);e=Kt()},m(n,u){for(let f=0;f<l.length;f+=1)l[f]&&l[f].m(n,u);ie(n,e,u)},p(n,u){if(u[0]&268435968){t=pt(n[9]);let f;for(f=0;f<t.length;f+=1){const v=Bs(n,t,f);l[f]?l[f].p(v,u):(l[f]=Fs(v),l[f].c(),l[f].m(e.parentNode,e))}for(;f<l.length;f+=1)l[f].d(1);l.length=t.length}},d(n){n&&o(e),Yt(l,n)}}}function Cr(a){let e,t='<svg class="h-5 w-5 text-muted-foreground" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect width="18" height="18" x="3" y="3" rx="2"></rect></svg>';return{c(){e=d("div"),e.innerHTML=t,this.h()},l(l){e=i(l,"DIV",{class:!0,"data-svelte-h":!0}),pe(e)!=="svelte-1n0hfbl"&&(e.innerHTML=t),this.h()},h(){r(e,"class","w-10 h-14 bg-muted rounded flex items-center justify-center shrink-0")},m(l,n){ie(l,e,n)},p:Ct,d(l){l&&o(e)}}}function Br(a){let e,t,l;return{c(){e=d("img"),this.h()},l(n){e=i(n,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Gt(e.src,t=a[73].posterPath)||r(e,"src",t),r(e,"alt",l=a[73].name||a[73].title),r(e,"class","w-10 h-14 object-cover rounded shrink-0")},m(n,u){ie(n,e,u)},p(n,u){u[0]&512&&!Gt(e.src,t=n[73].posterPath)&&r(e,"src",t),u[0]&512&&l!==(l=n[73].name||n[73].title)&&r(e,"alt",l)},d(n){n&&o(e)}}}function Fs(a){var m,_;let e,t,l,n,u=(a[73].name||a[73].title)+"",f,v,z,B=(((m=a[73].firstAirDate)==null?void 0:m.slice(0,4))||((_=a[73].releaseDate)==null?void 0:_.slice(0,4))||"未知")+"",T,K,ee,p,E=a[73].id+"",j,O,D,re;function A(M,P){return M[73].posterPath?Br:Cr}let g=A(a),I=g(a);function x(){return a[57](a[73])}return{c(){e=d("button"),I.c(),t=w(),l=d("div"),n=d("p"),f=Z(u),v=w(),z=d("p"),T=Z(B),K=w(),ee=d("span"),p=Z("TMDB#"),j=Z(E),O=w(),this.h()},l(M){e=i(M,"BUTTON",{class:!0});var P=c(e);I.l(P),t=k(P),l=i(P,"DIV",{class:!0});var b=c(l);n=i(b,"P",{class:!0});var L=c(n);f=Y(L,u),L.forEach(o),v=k(b),z=i(b,"P",{class:!0});var le=c(z);T=Y(le,B),le.forEach(o),b.forEach(o),K=k(P),ee=i(P,"SPAN",{class:!0});var Q=c(ee);p=Y(Q,"TMDB#"),j=Y(Q,E),Q.forEach(o),O=k(P),P.forEach(o),this.h()},h(){r(n,"class","font-medium truncate"),r(z,"class","text-sm text-muted-foreground"),r(l,"class","flex-1 min-w-0"),r(ee,"class","text-xs text-muted-foreground"),r(e,"class","w-full flex items-center gap-4 p-3 rounded-md border border-border hover:bg-accent/50 text-left")},m(M,P){ie(M,e,P),I.m(e,null),s(e,t),s(e,l),s(l,n),s(n,f),s(l,v),s(l,z),s(z,T),s(e,K),s(e,ee),s(ee,p),s(ee,j),s(e,O),D||(re=me(e,"click",x),D=!0)},p(M,P){var b,L;a=M,g===(g=A(a))&&I?I.p(a,P):(I.d(1),I=g(a),I&&(I.c(),I.m(e,t))),P[0]&512&&u!==(u=(a[73].name||a[73].title)+"")&&ke(f,u),P[0]&512&&B!==(B=(((b=a[73].firstAirDate)==null?void 0:b.slice(0,4))||((L=a[73].releaseDate)==null?void 0:L.slice(0,4))||"未知")+"")&&ke(T,B),P[0]&512&&E!==(E=a[73].id+"")&&ke(j,E)},d(M){M&&o(e),I.d(),D=!1,re()}}}function Us(a){let e,t,l,n,u,f,v,z="一键刮削",B,T,K='<svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 6 6 18"></path><path d="m6 6 12 12"></path></svg>',ee,p,E,j,O=a[13].length+"",D,re,A=a[13].filter(Gs).length+"",g,I,x,m,_,M="选择消歧方式：",P,b,L,le,Q,se='<p class="font-medium">手动匹配</p> <p class="text-sm text-muted-foreground">逐个确认 TMDB 匹配结果，适合对准确性要求高的场景</p>',W,C,S,J,R,N,$='<p class="font-medium flex items-center gap-2">AI 自动 <svg class="h-4 w-4 text-yellow-500" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2L15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2Z"></path></svg></p> <p class="text-sm text-muted-foreground">使用 AI 自动选择最佳匹配，适合批量快速处理</p>',te,oe,de,ue,Ee="取消",ye,be,Be="开始刮削",Te,we,_e,Ne,Le;return _e=Xs(a[61][0]),{c(){e=d("div"),t=d("button"),n=w(),u=d("div"),f=d("div"),v=d("h2"),v.textContent=z,B=w(),T=d("button"),T.innerHTML=K,ee=w(),p=d("div"),E=d("p"),j=Z("选中 "),D=Z(O),re=Z(" 部剧集，其中 "),g=Z(A),I=Z(" 部需要匹配 TMDB。"),x=w(),m=d("div"),_=d("p"),_.textContent=M,P=w(),b=d("label"),L=d("input"),le=w(),Q=d("div"),Q.innerHTML=se,C=w(),S=d("label"),J=d("input"),R=w(),N=d("div"),N.innerHTML=$,oe=w(),de=d("div"),ue=d("button"),ue.textContent=Ee,ye=w(),be=d("button"),be.textContent=Be,this.h()},l(X){e=i(X,"DIV",{class:!0});var ne=c(e);t=i(ne,"BUTTON",{class:!0}),c(t).forEach(o),n=k(ne),u=i(ne,"DIV",{class:!0});var fe=c(u);f=i(fe,"DIV",{class:!0});var ce=c(f);v=i(ce,"H2",{class:!0,"data-svelte-h":!0}),pe(v)!=="svelte-cuhqyl"&&(v.textContent=z),B=k(ce),T=i(ce,"BUTTON",{class:!0,"data-svelte-h":!0}),pe(T)!=="svelte-amyx0j"&&(T.innerHTML=K),ce.forEach(o),ee=k(fe),p=i(fe,"DIV",{class:!0});var he=c(p);E=i(he,"P",{class:!0});var y=c(E);j=Y(y,"选中 "),D=Y(y,O),re=Y(y," 部剧集，其中 "),g=Y(y,A),I=Y(y," 部需要匹配 TMDB。"),y.forEach(o),x=k(he),m=i(he,"DIV",{class:!0});var H=c(m);_=i(H,"P",{class:!0,"data-svelte-h":!0}),pe(_)!=="svelte-1g6y89l"&&(_.textContent=M),P=k(H),b=i(H,"LABEL",{class:!0});var Oe=c(b);L=i(Oe,"INPUT",{type:!0,class:!0}),le=k(Oe),Q=i(Oe,"DIV",{"data-svelte-h":!0}),pe(Q)!=="svelte-1ng0myv"&&(Q.innerHTML=se),Oe.forEach(o),C=k(H),S=i(H,"LABEL",{class:!0});var Se=c(S);J=i(Se,"INPUT",{type:!0,class:!0}),R=k(Se),N=i(Se,"DIV",{"data-svelte-h":!0}),pe(N)!=="svelte-1onmt3y"&&(N.innerHTML=$),Se.forEach(o),H.forEach(o),he.forEach(o),oe=k(fe),de=i(fe,"DIV",{class:!0});var Ce=c(de);ue=i(Ce,"BUTTON",{class:!0,"data-svelte-h":!0}),pe(ue)!=="svelte-1kn8oou"&&(ue.textContent=Ee),ye=k(Ce),be=i(Ce,"BUTTON",{class:!0,"data-svelte-h":!0}),pe(be)!=="svelte-aue2u5"&&(be.textContent=Be),Ce.forEach(o),fe.forEach(o),ne.forEach(o),this.h()},h(){r(t,"class","absolute inset-0 bg-black/50"),r(v,"class","text-lg font-semibold"),r(T,"class","inline-flex items-center justify-center rounded-md h-8 w-8 hover:bg-accent"),r(f,"class","flex items-center justify-between border-b border-border p-4"),r(E,"class","text-sm text-muted-foreground"),r(_,"class","text-sm font-medium"),r(L,"type","radio"),L.__value="manual",xt(L,L.__value),r(L,"class","mt-0.5"),r(b,"class",W="flex items-start gap-3 p-3 rounded-md border border-border hover:bg-accent/50 cursor-pointer "+(a[12]==="manual"?"border-primary bg-accent/30":"")),r(J,"type","radio"),J.__value="ai",xt(J,J.__value),r(J,"class","mt-0.5"),r(S,"class",te="flex items-start gap-3 p-3 rounded-md border border-border hover:bg-accent/50 cursor-pointer "+(a[12]==="ai"?"border-primary bg-accent/30":"")),r(m,"class","space-y-2"),r(p,"class","p-4 space-y-4"),r(ue,"class","inline-flex items-center justify-center rounded-md text-sm font-medium h-9 px-4 py-2 border border-input bg-background hover:bg-accent"),r(be,"class","inline-flex items-center justify-center rounded-md text-sm font-medium h-9 px-4 py-2 bg-primary text-primary-foreground hover:opacity-90"),r(de,"class","flex justify-end gap-2 border-t border-border p-4"),r(u,"class","relative w-full max-w-md bg-card border border-border rounded-lg shadow-lg overflow-hidden"),r(e,"class","fixed inset-0 z-50 flex items-center justify-center"),_e.p(L,J)},m(X,ne){ie(X,e,ne),s(e,t),s(e,n),s(e,u),s(u,f),s(f,v),s(f,B),s(f,T),s(u,ee),s(u,p),s(p,E),s(E,j),s(E,D),s(E,re),s(E,g),s(E,I),s(p,x),s(p,m),s(m,_),s(m,P),s(m,b),s(b,L),L.checked=L.__value===a[12],s(b,le),s(b,Q),s(m,C),s(m,S),s(S,J),J.checked=J.__value===a[12],s(S,R),s(S,N),s(u,oe),s(u,de),s(de,ue),s(de,ye),s(de,be),we=!0,Ne||(Le=[me(t,"click",a[58]),me(T,"click",a[59]),me(L,"change",a[60]),me(J,"change",a[62]),me(ue,"click",a[63]),me(be,"click",a[30])],Ne=!0)},p(X,ne){(!we||ne[0]&8192)&&O!==(O=X[13].length+"")&&ke(D,O),(!we||ne[0]&8192)&&A!==(A=X[13].filter(Gs).length+"")&&ke(g,A),ne[0]&4096&&(L.checked=L.__value===X[12]),(!we||ne[0]&4096&&W!==(W="flex items-start gap-3 p-3 rounded-md border border-border hover:bg-accent/50 cursor-pointer "+(X[12]==="manual"?"border-primary bg-accent/30":"")))&&r(b,"class",W),ne[0]&4096&&(J.checked=J.__value===X[12]),(!we||ne[0]&4096&&te!==(te="flex items-start gap-3 p-3 rounded-md border border-border hover:bg-accent/50 cursor-pointer "+(X[12]==="ai"?"border-primary bg-accent/30":"")))&&r(S,"class",te)},i(X){we||(X&&vt(()=>{we&&(l||(l=Ge(t,yt,{duration:200},!0)),l.run(1))}),X&&vt(()=>{we&&(Te||(Te=Ge(u,Qt,{duration:200,start:.95,easing:mt},!0)),Te.run(1))}),we=!0)},o(X){X&&(l||(l=Ge(t,yt,{duration:200},!1)),l.run(0)),X&&(Te||(Te=Ge(u,Qt,{duration:200,start:.95,easing:mt},!1)),Te.run(0)),we=!1},d(X){X&&o(e),X&&l&&l.end(),X&&Te&&Te.end(),_e.r(),Ne=!1,bt(Le)}}}function Tr(a){let e,t,l,n,u,f,v,z,B,T,K,ee,p,E,j,O=a[0].length+"",D,re,A,g,I,x,m,_,M,P,b,L,le,Q,se,W,C,S,J,R,N,$,te,oe,de,ue,Ee,ye,be,Be,Te,we,_e=a[15]&&a[4].size===0&&Ss(a);function Ne(y,H){return y[3]?lr:y[20].length===0?rr:sr}let Le=Ne(a),X=Le(a),ne=(a[4].size>0||a[14])&&Vs(a),fe=a[5]&&a[6]&&Ps(a),ce=a[7]&&Os(a),he=a[11]&&Us(a);return{c(){e=d("main"),t=d("div"),l=d("div"),n=d("div"),u=d("div"),f=U("svg"),v=U("circle"),z=U("path"),B=w(),T=d("input"),K=w(),ee=d("div"),p=d("div"),E=d("button"),j=Z("全部 ("),D=Z(O),re=Z(")"),g=w(),I=d("button"),x=Z("已刮削 ("),m=Z(a[19]),_=Z(")"),P=w(),b=d("button"),L=Z("未刮削 ("),le=Z(a[18]),Q=Z(")"),W=w(),C=d("button"),S=Z("待处理 ("),J=Z(a[17]),R=Z(")"),$=w(),te=d("div"),_e&&_e.c(),oe=w(),de=d("div"),X.c(),ue=w(),ne&&ne.c(),Ee=w(),fe&&fe.c(),ye=w(),ce&&ce.c(),be=w(),he&&he.c(),Be=Kt(),this.h()},l(y){e=i(y,"MAIN",{class:!0});var H=c(e);t=i(H,"DIV",{class:!0});var Oe=c(t);l=i(Oe,"DIV",{class:!0});var Se=c(l);n=i(Se,"DIV",{class:!0});var Ce=c(n);u=i(Ce,"DIV",{class:!0});var Je=c(u);f=F(Je,"svg",{class:!0,viewBox:!0,fill:!0,stroke:!0,"stroke-width":!0});var Xe=c(f);v=F(Xe,"circle",{cx:!0,cy:!0,r:!0}),c(v).forEach(o),z=F(Xe,"path",{d:!0}),c(z).forEach(o),Xe.forEach(o),B=k(Je),T=i(Je,"INPUT",{type:!0,placeholder:!0,class:!0}),Je.forEach(o),Ce.forEach(o),Se.forEach(o),K=k(Oe),ee=i(Oe,"DIV",{class:!0});var je=c(ee);p=i(je,"DIV",{class:!0});var Me=c(p);E=i(Me,"BUTTON",{class:!0});var ve=c(E);j=Y(ve,"全部 ("),D=Y(ve,O),re=Y(ve,")"),ve.forEach(o),g=k(Me),I=i(Me,"BUTTON",{class:!0});var ae=c(I);x=Y(ae,"已刮削 ("),m=Y(ae,a[19]),_=Y(ae,")"),ae.forEach(o),P=k(Me),b=i(Me,"BUTTON",{class:!0});var De=c(b);L=Y(De,"未刮削 ("),le=Y(De,a[18]),Q=Y(De,")"),De.forEach(o),W=k(Me),C=i(Me,"BUTTON",{class:!0});var Ve=c(C);S=Y(Ve,"待处理 ("),J=Y(Ve,a[17]),R=Y(Ve,")"),Ve.forEach(o),Me.forEach(o),$=k(je),te=i(je,"DIV",{class:!0});var Qe=c(te);_e&&_e.l(Qe),Qe.forEach(o),je.forEach(o),Oe.forEach(o),oe=k(H),de=i(H,"DIV",{class:!0});var Ye=c(de);X.l(Ye),Ye.forEach(o),ue=k(H),ne&&ne.l(H),H.forEach(o),Ee=k(y),fe&&fe.l(y),ye=k(y),ce&&ce.l(y),be=k(y),he&&he.l(y),Be=Kt(),this.h()},h(){r(v,"cx","11"),r(v,"cy","11"),r(v,"r","8"),r(z,"d","m21 21-4.3-4.3"),r(f,"class","absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"),r(f,"viewBox","0 0 24 24"),r(f,"fill","none"),r(f,"stroke","currentColor"),r(f,"stroke-width","2"),r(T,"type","text"),r(T,"placeholder","搜索剧集..."),r(T,"class","h-9 w-64 rounded-md border border-input bg-background pl-9 pr-3 text-sm"),r(u,"class","relative"),r(n,"class","flex items-center gap-4 flex-wrap"),r(l,"class","flex items-center justify-between flex-wrap gap-4"),r(E,"class",A="inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium transition-all "+(a[2]==="all"?"bg-background text-foreground shadow-sm":"")),r(I,"class",M="inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium transition-all "+(a[2]==="scraped"?"bg-background text-foreground shadow-sm":"")),r(b,"class",se="inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium transition-all "+(a[2]==="unscraped"?"bg-background text-foreground shadow-sm":"")),r(C,"class",N="inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium transition-all "+(a[2]==="pending"?"bg-background text-foreground shadow-sm":"")),r(p,"class","inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground"),r(te,"class","flex gap-2 items-center"),r(ee,"class","flex items-center justify-between flex-wrap gap-4"),r(t,"class","mb-6 space-y-4"),r(de,"class","rounded-lg border border-border bg-card overflow-hidden"),r(e,"class","container mx-auto px-4 py-8"),xs(e,"pb-24",a[4].size>0||a[14])},m(y,H){ie(y,e,H),s(e,t),s(t,l),s(l,n),s(n,u),s(u,f),s(f,v),s(f,z),s(u,B),s(u,T),xt(T,a[1]),s(t,K),s(t,ee),s(ee,p),s(p,E),s(E,j),s(E,D),s(E,re),s(p,g),s(p,I),s(I,x),s(I,m),s(I,_),s(p,P),s(p,b),s(b,L),s(b,le),s(b,Q),s(p,W),s(p,C),s(C,S),s(C,J),s(C,R),s(ee,$),s(ee,te),_e&&_e.m(te,null),s(e,oe),s(e,de),X.m(de,null),s(e,ue),ne&&ne.m(e,null),ie(y,Ee,H),fe&&fe.m(y,H),ie(y,ye,H),ce&&ce.m(y,H),ie(y,be,H),he&&he.m(y,H),ie(y,Be,H),Te||(we=[me(T,"input",a[39]),me(E,"click",a[40]),me(I,"click",a[41]),me(b,"click",a[42]),me(C,"click",a[43])],Te=!0)},p(y,H){H[0]&2&&T.value!==y[1]&&xt(T,y[1]),H[0]&1&&O!==(O=y[0].length+"")&&ke(D,O),H[0]&4&&A!==(A="inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium transition-all "+(y[2]==="all"?"bg-background text-foreground shadow-sm":""))&&r(E,"class",A),H[0]&524288&&ke(m,y[19]),H[0]&4&&M!==(M="inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium transition-all "+(y[2]==="scraped"?"bg-background text-foreground shadow-sm":""))&&r(I,"class",M),H[0]&262144&&ke(le,y[18]),H[0]&4&&se!==(se="inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium transition-all "+(y[2]==="unscraped"?"bg-background text-foreground shadow-sm":""))&&r(b,"class",se),H[0]&131072&&ke(J,y[17]),H[0]&4&&N!==(N="inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium transition-all "+(y[2]==="pending"?"bg-background text-foreground shadow-sm":""))&&r(C,"class",N),y[15]&&y[4].size===0?_e?_e.p(y,H):(_e=Ss(y),_e.c(),_e.m(te,null)):_e&&(_e.d(1),_e=null),Le===(Le=Ne(y))&&X?X.p(y,H):(X.d(1),X=Le(y),X&&(X.c(),X.m(de,null))),y[4].size>0||y[14]?ne?(ne.p(y,H),H[0]&16400&&Ze(ne,1)):(ne=Vs(y),ne.c(),Ze(ne,1),ne.m(e,null)):ne&&(Rt(),ht(ne,1,1,()=>{ne=null}),zt()),H[0]&16400&&xs(e,"pb-24",y[4].size>0||y[14]),y[5]&&y[6]?fe?(fe.p(y,H),H[0]&96&&Ze(fe,1)):(fe=Ps(y),fe.c(),Ze(fe,1),fe.m(ye.parentNode,ye)):fe&&(Rt(),ht(fe,1,1,()=>{fe=null}),zt()),y[7]?ce?(ce.p(y,H),H[0]&128&&Ze(ce,1)):(ce=Os(y),ce.c(),Ze(ce,1),ce.m(be.parentNode,be)):ce&&(Rt(),ht(ce,1,1,()=>{ce=null}),zt()),y[11]?he?(he.p(y,H),H[0]&2048&&Ze(he,1)):(he=Us(y),he.c(),Ze(he,1),he.m(Be.parentNode,Be)):he&&(Rt(),ht(he,1,1,()=>{he=null}),zt())},i(y){Ze(ne),Ze(fe),Ze(ce),Ze(he)},o(y){ht(ne),ht(fe),ht(ce),ht(he)},d(y){y&&(o(e),o(Ee),o(ye),o(be),o(Be)),_e&&_e.d(),X.d(),ne&&ne.d(),fe&&fe.d(y),ce&&ce.d(y),he&&he.d(y),Te=!1,bt(we)}}}function os(a){switch(a){case"scraped":return{label:"已刮削",color:"text-green-500",border:"border-green-500/50"};case"unscraped":return{label:"未刮削",color:"text-red-500",border:"border-red-500/50"};case"supplement":return{label:"待处理",color:"text-yellow-500",border:"border-yellow-500/50"};default:return{label:"未知",color:"text-muted-foreground",border:"border-border"}}}const Hs=(a,e)=>a+e.episodes.length,zs=(a,e)=>a+e.episodes.length,Rs=(a,e)=>a.season-e.season,qs=(a,e)=>(a.parsed.episode||0)-(e.parsed.episode||0),Gs=a=>!a.show.tmdbId;function Dr(a,e,t){let l,n,u,f,v=[],z=!0,B=new Set,T="",K="all",ee=!1,p=null,E=!1,j="",O=[],D=!1,re=!1,A="manual",g=[],I=0,x=!1,m="",_=new Map,M=new Set,P=null,b={current:0,total:0};function L(h){h.item&&M.has(h.item)&&(_.set(h.item,h.percent),_=_,t(15,m=h.message||"")),h.type==="complete"&&M.size>0&&setTimeout(()=>{_.clear(),_=_,M.clear()},2e3)}Ws(async()=>{try{t(0,v=await tt())}catch(h){console.error(h)}finally{t(3,z=!1)}P=$s(L)}),Qs(()=>{P&&P()});function le(h,V){if(V.shiftKey&&B.size>0){const q=l.map(We=>We.path),ge=Array.from(B).pop(),Ae=q.indexOf(ge),Pe=q.indexOf(h),[Bt,Ke]=Ae<Pe?[Ae,Pe]:[Pe,Ae];for(let We=Bt;We<=Ke;We++)B.add(q[We])}else V.ctrlKey||V.metaKey?B.has(h)?B.delete(h):B.add(h):(B.clear(),B.add(h));t(4,B)}function Q(){B.size===l.length?B.clear():l.forEach(h=>B.add(h.path)),t(4,B)}function se(h){t(6,p=h),t(5,ee=!0)}function W(){t(5,ee=!1),t(6,p=null)}async function C(){if(j.trim()){t(10,D=!0);try{t(9,O=await er("tv",j))}catch(h){console.error(h)}finally{t(10,D=!1)}}}function S(h){t(6,p=h),t(8,j=h.name),t(7,E=!0),C()}function J(){t(7,E=!1),t(9,O=[])}async function R(h){if(!p||x)return;if(g.length>0&&I<g.length){t(13,g[I].match={id:h.id,name:h.name||h.title},g),J(),I++,await de();return}const V=p.path;t(14,x=!0),t(15,m=`正在匹配 ${h.name||h.title}...`);try{const q=await _t("tv",V,h.id);if(q.success){t(15,m="匹配成功，已创建元数据，正在刷新列表..."),t(3,z=!0),t(0,v=[]);const ge=await tt();t(0,v=[...ge]),t(3,z=!1),t(15,m="匹配成功")}else t(15,m=`匹配失败: ${q.message}`)}catch(q){t(15,m=`错误: ${q}`)}t(14,x=!1),J(),setTimeout(()=>{t(15,m="")},3e3)}function N(){if(x)return;const V=Array.from(B).map(ge=>v.find(Ae=>Ae.path===ge)).filter(ge=>ge!==void 0);V.some(ge=>ge.groupStatus==="unscraped"||!ge.tmdbId)?(t(13,g=V.map(ge=>({show:ge}))),t(11,re=!0)):$()}async function $(){t(14,x=!0),t(15,m="正在补刮...");const h=Array.from(B);t(16,b={current:0,total:h.length});for(const V of h)_.set(V,0);_=_;for(const V of h){const q=v.find(Pe=>Pe.path===V);if(!q)continue;t(15,m=`正在补刮 (${b.current+1}/${b.total}): ${q.name}`),(await ns(q.path)).success,t(16,b.current++,b),t(16,b);const Ae=await tt();t(0,v=[...Ae])}t(15,m=""),t(14,x=!1),B.clear(),t(4,B),setTimeout(()=>{t(16,b={current:0,total:0})},2e3)}async function te(){t(11,re=!1),A==="ai"?await oe():(I=0,await de())}async function oe(){t(14,x=!0),t(15,m="正在使用 AI 自动匹配并刮削...");const h=[];for(const{show:q}of g)if(q.tmdbId)h.push({sourcePath:q.path,kind:"tv",showName:q.name,tmdbId:q.tmdbId});else{const ge=await Cs(q.path,"tv",q.name);ge.matched&&ge.result?h.push({sourcePath:q.path,kind:"tv",showName:q.name,tmdbId:ge.result.id}):ge.candidates.length>0&&h.push({sourcePath:q.path,kind:"tv",showName:q.name,candidates:ge.candidates.map(Ae=>({id:Ae.id,name:Ae.name}))})}if(h.length>0){for(const ge of h)_.set(ge.sourcePath,0),M.add(ge.sourcePath);_=_,M=M;const q=await tr(h,"ai");t(15,m=`完成: ${q.processed} 成功, ${q.failed} 失败`)}else t(15,m="没有可处理的项目");t(14,x=!1);const V=await tt();t(0,v=[...V]),B.clear(),t(4,B),t(13,g=[]),setTimeout(()=>{t(15,m="")},3e3)}async function de(){if(I>=g.length){await ue();return}const h=g[I];if(h.show.tmdbId){h.match={id:h.show.tmdbId},I++,await de();return}t(6,p=h.show),t(8,j=h.show.name),t(7,E=!0),await C()}async function ue(){t(14,x=!0),t(15,m="正在刮削..."),t(16,b={current:0,total:g.length});for(const{show:h}of g)_.set(h.path,0);_=_;for(const{show:h,match:V}of g){if(!(V!=null&&V.id)){t(16,b.current++,b),t(16,b),_.set(h.path,100),_=_;continue}t(15,m=`正在刮削 (${b.current+1}/${b.total}): ${h.name}`),(await _t("tv",h.path,V.id)).success,t(16,b.current++,b),t(16,b);const ge=await tt();t(0,v=[...ge])}t(15,m=""),t(14,x=!1),B.clear(),t(4,B),t(13,g=[]),setTimeout(()=>{t(16,b={current:0,total:0})},2e3)}async function Ee(){if(x)return;t(14,x=!0),t(15,m="正在刷新元数据...");const h=Array.from(B);t(16,b={current:0,total:h.length});for(const V of h)_.set(V,0);_=_;for(const V of h){const q=v.find(Pe=>Pe.path===V);if(!q||!q.tmdbId){t(16,b.current++,b),t(16,b),_.set(V,100),_=_;continue}t(15,m=`正在刷新 (${b.current+1}/${b.total}): ${q.name}`),(await _t("tv",q.path,q.tmdbId)).success,t(16,b.current++,b),t(16,b);const Ae=await tt();t(0,v=[...Ae])}t(15,m=""),t(14,x=!1),B.clear(),t(4,B),setTimeout(()=>{t(16,b={current:0,total:0})},2e3)}function ye(){const h=Array.from(B)[0],V=v.find(q=>q.path===h);V&&S(V)}async function be(h){if(!x){if(h.groupStatus==="unscraped"||!h.tmdbId){t(14,x=!0),t(15,m="正在自动匹配...");try{const V=await Cs(h.path,"tv",h.name);if(V.success&&V.bestMatch){t(15,m=`匹配成功: ${V.bestMatch.name}，正在刮削...`);const q=await _t("tv",h.path,V.bestMatch.id);t(15,m=q.success?"刮削成功":`失败: ${q.message}`)}else if(V.candidates&&V.candidates.length>0){t(14,x=!1),t(15,m=""),S(h);return}else{t(14,x=!1),t(15,m="未找到匹配结果，请手动搜索"),setTimeout(()=>{t(15,m="")},3e3),S(h);return}}catch(V){t(15,m=`匹配失败: ${V}`)}t(14,x=!1),t(0,v=await tt()),p&&t(6,p=v.find(V=>V.path===p.path)||null),setTimeout(()=>{t(15,m="")},3e3);return}t(14,x=!0),t(15,m="正在补刮...");try{const V=await ns(h.path);t(15,m=V.success?"补刮成功":`失败: ${V.message}`);const q=await tt();t(0,v=q)}catch(V){t(15,m=`错误: ${V}`)}t(14,x=!1),setTimeout(()=>{t(15,m="")},3e3)}}async function Be(h){if(x||!h.tmdbId)return;t(14,x=!0),t(15,m="正在刷新元数据...");const V=await _t("tv",h.path,h.tmdbId);t(15,m=V.success?"刷新成功":`失败: ${V.message}`),t(14,x=!1),t(0,v=await tt()),setTimeout(()=>{t(15,m="")},3e3)}async function Te(h){if(x||!(p!=null&&p.tmdbId))return;t(14,x=!0),t(15,m=`正在刷新第 ${h} 季元数据...`);const V=await _t("tv",p.path,p.tmdbId,{season:h});t(15,m=V.success?`第 ${h} 季刷新成功`:`失败: ${V.message}`),t(14,x=!1),t(0,v=await tt()),p&&t(6,p=v.find(q=>q.path===p.path)||null),setTimeout(()=>{t(15,m="")},3e3)}async function we(h,V){if(x||!(p!=null&&p.tmdbId))return;t(14,x=!0),t(15,m=`正在刷新 S${String(h).padStart(2,"0")}E${String(V).padStart(2,"0")} 元数据...`);const q=await _t("tv",p.path,p.tmdbId,{season:h,episode:V});t(15,m=q.success?`S${String(h).padStart(2,"0")}E${String(V).padStart(2,"0")} 刷新成功`:`失败: ${q.message}`),t(14,x=!1),setTimeout(()=>{t(15,m="")},3e3)}async function _e(h){if(x||!(p!=null&&p.tmdbId))return;t(14,x=!0),t(15,m=`正在补刮第 ${h} 季...`);const V=await ns(p.path);t(15,m=V.success?`第 ${h} 季补刮完成`:`失败: ${V.message}`),t(14,x=!1),t(0,v=await tt()),p&&t(6,p=v.find(q=>q.path===p.path)||null),setTimeout(()=>{t(15,m="")},3e3)}const Ne=[[]];function Le(h){Ys.call(this,a,h)}function X(){T=this.value,t(1,T)}const ne=()=>t(2,K="all"),fe=()=>t(2,K="scraped"),ce=()=>t(2,K="unscraped"),he=()=>t(2,K="pending"),y=h=>{B.has(h.path)?B.delete(h.path):B.add(h.path),t(4,B)},H=h=>se(h),Oe=h=>S(h),Se=(h,V)=>le(h.path,V),Ce=h=>se(h),Je=h=>Te(h.season),Xe=h=>_e(h.season),je=(h,V)=>we(h.season,V.parsed.episode||0),Me=()=>{p&&be(p)},ve=()=>{p&&Be(p)},ae=()=>{const h=p;W(),h&&S(h)};function De(){j=this.value,t(8,j)}const Ve=h=>h.key==="Enter"&&C(),Qe=h=>R(h),Ye=()=>t(11,re=!1),it=()=>t(11,re=!1);function qe(){A=this.__value,t(12,A)}function lt(){A=this.__value,t(12,A)}const $e=()=>t(11,re=!1);return a.$$.update=()=>{a.$$.dirty[0]&7&&t(20,l=v.filter(h=>!(K==="scraped"&&h.groupStatus!=="scraped"||K==="unscraped"&&h.groupStatus!=="unscraped"||K==="pending"&&h.groupStatus!=="supplement"||T&&!h.name.toLowerCase().includes(T.toLowerCase())))),a.$$.dirty[0]&1&&t(19,n=v.filter(h=>h.groupStatus==="scraped").length),a.$$.dirty[0]&1&&t(18,u=v.filter(h=>h.groupStatus==="unscraped").length),a.$$.dirty[0]&1&&t(17,f=v.filter(h=>h.groupStatus==="supplement").length)},[v,T,K,z,B,ee,p,E,j,O,D,re,A,g,x,m,b,f,u,n,l,le,Q,se,W,C,S,J,R,N,te,Ee,ye,be,Be,Te,we,_e,Le,X,ne,fe,ce,he,y,H,Oe,Se,Ce,Je,Xe,je,Me,ve,ae,De,Ve,Qe,Ye,it,qe,Ne,lt,$e]}class Nr extends Zs{constructor(e){super(),Js(this,e,Dr,Tr,Ks,{},null,[-1,-1,-1])}}export{Nr as component};
